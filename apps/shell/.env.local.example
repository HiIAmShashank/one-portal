# OnePortal Shell - Authentication Configuration
# This is a TEMPLATE file - Copy to .env.local for local development overrides
#
# 📁 Vite Environment File Loading Priority (highest to lowest):
#   1. .env.[mode].local     (git-ignored, mode-specific local overrides)
#   2. .env.[mode]           (committed, mode-specific defaults)
#   3. .env.local            (git-ignored, local overrides for all modes)
#   4. .env                  (committed, base defaults)
#
# 🎯 Available Modes & Commands:
#   - development: pnpm dev              → Uses .env.development
#   - azure:       pnpm dev:azure        → Uses .env.azure
#   - production:  pnpm build            → Uses .env.production
#   - production:  pnpm turbo build      → Uses .env.production
#
# 💡 When to use .env.local:
#   - Personal development settings that differ from team defaults
#   - Testing with different client IDs or tenants
#   - Override any variable from mode-specific files
#   - This file is git-ignored for security
#
# ⚠️  Note: .env.local is loaded for ALL modes (dev, azure, production)
#          Mode-specific files (.env.[mode]) take precedence over .env.local
#
# -----------------------------------------------------------------------------

# Azure AD Application (Client) ID for Shell app
# Register a new app in Azure Portal > App Registrations
# Each app (Shell, Billing, Reports) needs its own Client ID for token isolation
VITE_AUTH_CLIENT_ID=your-shell-client-id-guid-here

# Azure AD Tenant Authority
# Use /common for multi-tenant or your specific tenant ID
VITE_AUTH_AUTHORITY=https://login.microsoftonline.com/common

# Redirect URI after authentication
# Must match exactly with Azure AD app registration
# 
# SWA CLI + Docker (unified origin):
VITE_AUTH_REDIRECT_URI=http://localhost:4280/auth/callback
# 
# Vite Dev Server (separate ports):
# VITE_AUTH_REDIRECT_URI=http://localhost:5000/auth/callback
#
# Production: https://oneportal.azurestaticapps.net/auth/callback

# Post-logout redirect URI (optional)
# Where to redirect after sign-out
# SWA CLI + Docker:
VITE_AUTH_POST_LOGOUT_REDIRECT_URI=http://localhost:4280/
# Vite Dev: http://localhost:5000/

# Default scopes for Shell (comma-separated)
# User.Read is the minimum scope for basic profile info
VITE_AUTH_SCOPES=User.Read

# App name for telemetry and logging
VITE_AUTH_APP_NAME=shell

# Application mode for embedded vs standalone detection
# - embedded: App is hosted within Shell (redirects on SSO failure)
# - standalone: App runs independently (shows errors, no redirect)
# - auto: Auto-detect based on URL path (default)
# Shell should use 'standalone' (or 'auto') since it's the host app
VITE_APP_MODE=auto
